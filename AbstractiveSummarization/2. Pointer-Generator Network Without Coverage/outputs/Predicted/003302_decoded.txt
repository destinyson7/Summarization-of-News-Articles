real madrid closed the gap on barcelona to just two points at the top of la liga .
both los blancos stars were substituted as carlo ancelotti 's side struggled to overcome a spirited malaga , who had chances to snatch a draw .
cristiano ronaldo missed a penalty but provided goals for sergio ramos and james rodriguez .